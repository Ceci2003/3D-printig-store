---
import Layout from '../components/Layout.astro';
import SectionTitle from '../components/SectionTitle.astro';
import ProductCarousel from '../components/ProductCarousel.astro';
import HowItWorks from '../components/HowItWorks.astro';
import ServiceCard from '../components/ServiceCard.astro';
import { getCollection, getEntry } from 'astro:content';

let settings = null;
try {
  settings = (await getEntry('site', 'settings')).data;
} catch (e) {
  // Settings not found, use defaults
}
const products = await getCollection('products', ({ data }) => data.status === 'active');
const featuredProducts = products
  .filter(p => p.data.isTop || p.data.featured || p.data.isNew)
  .slice(0, 8);
---

<Layout title={`${settings?.siteName || '3D Print Studio'} - –ù–∞—á–∞–ª–æ`}>

  <!-- Hero Section -->
  <section class="relative text-white py-16 md:py-24 overflow-hidden">
    <!-- Background Layers -->
    <div class="absolute inset-0 bg-gradient-to-br from-blue-600 via-blue-700 to-blue-900"></div>
    
    <!-- Subtle Pattern Background (3D printing grid pattern) -->
    <div 
      class="absolute inset-0 opacity-[0.15]"
      style="background-image: 
        linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px);
        background-size: 50px 50px;
        filter: blur(0.5px);"
    ></div>
    
    <!-- Gradient Overlay for Text Readability -->
    <div class="absolute inset-0 bg-gradient-to-b from-blue-900/40 via-transparent to-blue-900/60"></div>
    
    <!-- Subtle Grain Effect -->
    <div 
      class="absolute inset-0 opacity-[0.03] pointer-events-none"
      style="background-image: url('data:image/svg+xml,%3Csvg viewBox=\'0 0 400 400\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cfilter id=\'noiseFilter\'%3E%3CfeTurbulence type=\'fractalNoise\' baseFrequency=\'0.9\' numOctaves=\'4\' stitchTiles=\'stitch\'/%3E%3C/filter%3E%3Crect width=\'100%25\' height=\'100%25\' filter=\'url(%23noiseFilter)\'/%3E%3C/svg%3E');"
    ></div>
    
    <!-- Content -->
    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-3xl mx-auto text-center">
        <h1 class="text-4xl md:text-6xl font-extrabold mb-6 tracking-tight drop-shadow-lg">
          {settings?.siteName || '3D Print Studio'}
        </h1>
        <p class="text-xl md:text-2xl mb-12 text-blue-50 font-light leading-relaxed drop-shadow-md">
          {settings?.brandTagline || '–í–∞—à–∏—è—Ç –ø–∞—Ä—Ç–Ω—å–æ—Ä –∑–∞ 3D –ø–µ—á–∞—Ç –∏ –¥–∏–∑–∞–π–Ω'}
        </p>
        
        <!-- Two Panels -->
        <div class="grid md:grid-cols-2 gap-6 mt-16">
          <!-- Products Card -->
          <div class="group relative bg-white/15 backdrop-blur-md rounded-xl p-6 border border-white/20 overflow-hidden transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl hover:shadow-blue-900/50">
            <!-- Card Background Pattern (Products - 3D objects pattern) -->
            <div 
              class="absolute inset-0 opacity-[0.12]"
              style="background-image: 
                radial-gradient(circle at 20% 30%, rgba(255,255,255,0.3) 2px, transparent 2px),
                radial-gradient(circle at 80% 70%, rgba(255,255,255,0.3) 2px, transparent 2px),
                radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 1px, transparent 1px);
                background-size: 60px 60px, 80px 80px, 40px 40px;
                background-position: 0 0, 20px 20px, 10px 10px;"
            ></div>
            
            <!-- Gradient Overlay -->
            <div class="absolute inset-0 bg-gradient-to-br from-blue-600/30 via-purple-600/20 to-blue-800/40"></div>
            
            <!-- Content -->
            <div class="relative z-10">
              <h2 class="text-2xl font-bold mb-4 text-white drop-shadow-md">–ü—Ä–æ–¥—É–∫—Ç–∏</h2>
              <ul class="text-left space-y-2 mb-6 text-blue-50">
                <li>‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —Ñ–∏–≥—É—Ä–∫–∏ –∏ –ø–æ–¥–∞—Ä—ä—Ü–∏</li>
                <li>‚Ä¢ –ì–æ—Ç–æ–≤–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –∑–∞ –≤—Å–µ–∫–∏–¥–Ω–µ–≤–Ω–∞ —É–ø–æ—Ç—Ä–µ–±–∞</li>
                <li>‚Ä¢ –°–µ–∑–æ–Ω–Ω–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –∫–æ–ª–µ–∫—Ü–∏–∏</li>
              </ul>
              <a
                href="/products"
                class="inline-block bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-transparent transition shadow-lg hover:shadow-xl"
              >
                –í–∏–∂ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ
              </a>
            </div>
          </div>
          
          <!-- Services Card -->
          <div class="group relative bg-white/15 backdrop-blur-md rounded-xl p-6 border border-white/20 overflow-hidden transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl hover:shadow-blue-900/50">
            <!-- Card Background Pattern (Services - 3D printer/CAD pattern) -->
            <div 
              class="absolute inset-0 opacity-[0.12]"
              style="background-image: 
                repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px),
                repeating-linear-gradient(-45deg, transparent, transparent 10px, rgba(255,255,255,0.08) 10px, rgba(255,255,255,0.08) 20px);
                background-size: 40px 40px;"
            ></div>
            
            <!-- Gradient Overlay -->
            <div class="absolute inset-0 bg-gradient-to-br from-cyan-600/30 via-blue-600/20 to-indigo-800/40"></div>
            
            <!-- Content -->
            <div class="relative z-10">
              <h2 class="text-2xl font-bold mb-4 text-white drop-shadow-md">–£—Å–ª—É–≥–∏</h2>
              <ul class="text-left space-y-2 mb-6 text-blue-50">
                <li>‚Ä¢ 3D –ø–µ—á–∞—Ç –ø–æ –ø–æ—Ä—ä—á–∫–∞</li>
                <li>‚Ä¢ –î–∏–∑–∞–π–Ω –∏ –º–æ–¥–µ–ª–∏—Ä–∞–Ω–µ</li>
                <li>‚Ä¢ 3D —Å–∫–∞–Ω–∏—Ä–∞–Ω–µ</li>
              </ul>
              <a
                href="/services"
                class="inline-block bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-transparent transition shadow-lg hover:shadow-xl"
              >
                –í–∏–∂ —É—Å–ª—É–≥–∏—Ç–µ
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Top/New Products -->
  <ProductCarousel 
    products={featuredProducts}
    id="top-products"
    title="–¢–æ–ø –ø—Ä–æ–¥—É–∫—Ç–∏"
    subtitle="–ù–∞–π-–ø–æ–ø—É–ª—è—Ä–Ω–∏—Ç–µ –∏ –Ω–æ–≤–∏ –ø—Ä–æ–¥—É–∫—Ç–∏"
  />

  <!-- How It Works -->
  <HowItWorks defaultTab="products" />

  <!-- Mini Gallery Products -->
  <section class="py-12 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold mb-4">–ù–∞—à–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏</h2>
        <p class="text-gray-600 max-w-2xl mx-auto mb-6">
          –û—Ç–∫—Ä–∏–π—Ç–µ —à–∏—Ä–æ–∫ —Å–ø–µ–∫—Ç—ä—Ä –æ—Ç 3D –ø–µ—á–∞—Ç–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ - –æ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –ø–æ–¥–∞—Ä—ä—Ü–∏ –¥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–∏ —á–∞—Å—Ç–∏.
        </p>
        <a
          href="/products"
          class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition"
        >
          –í–∏–∂ –≤—Å–∏—á–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏
        </a>
      </div>
    </div>
  </section>

  <!-- Mini Gallery Services -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4 max-w-6xl">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold mb-4">–ù–∞—à–∏—Ç–µ —É—Å–ª—É–≥–∏</h2>
        <p class="text-gray-600 max-w-2xl mx-auto">
          –ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∏ 3D —É—Å–ª—É–≥–∏ –∑–∞ –≤—Å–µ–∫–∏ –≤–∞—à–∏ –ø—Ä–æ–µ–∫—Ç - –æ—Ç –¥–∏–∑–∞–π–Ω –¥–æ –≥–æ—Ç–æ–≤ –ø—Ä–æ–¥—É–∫—Ç
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <ServiceCard
          title="3D –ü–µ—á–∞—Ç"
          description="–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω 3D –ø–µ—á–∞—Ç —Å —Ä–∞–∑–ª–∏—á–Ω–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∏ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏. –í–∏—Å–æ–∫–æ –∫–∞—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–µ—Ü–∏–∑–Ω–æ—Å—Ç –∑–∞ –≤—Å–µ–∫–∏ –ø—Ä–æ–µ–∫—Ç."
          imageSrc="/images/services/3d-printing.jpg"
          imageAlt="3D –ø—Ä–∏–Ω—Ç–µ—Ä –≤ –¥–µ–π—Å—Ç–≤–∏–µ —Å —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∏"
          href="/services#printing"
        />
        <ServiceCard
          title="–î–∏–∑–∞–π–Ω"
          description="–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ 3D –º–æ–¥–µ–ª–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –¥–∏–∑–∞–π–Ω–∏. –ü—Ä–µ–≤—Ä—ä—â–∞–º–µ –≤–∞—à–∏—Ç–µ –∏–¥–µ–∏ –≤ –≥–æ—Ç–æ–≤–∏ –∑–∞ –ø–µ—á–∞—Ç –º–æ–¥–µ–ª–∏."
          imageSrc="/images/services/3d-design.jpg"
          imageAlt="3D –º–æ–¥–µ–ª–∏—Ä–∞–Ω–µ –∏ –¥–∏–∑–∞–π–Ω –Ω–∞ –∫–æ–º–ø—é—Ç—ä—Ä"
          href="/services#design"
        />
        <ServiceCard
          title="3D –°–∫–∞–Ω–∏—Ä–∞–Ω–µ"
          description="–ü—Ä–µ—Ü–∏–∑–Ω–æ 3D —Å–∫–∞–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –æ–±–µ–∫—Ç–∏ –∑–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏–ª–∏ –∞–Ω–∞–ª–∏–∑. –í–∏—Å–æ–∫–æ –¥–µ—Ç–∞–π–ª–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –∑–∞ –≤—Å–µ–∫–∏ –æ–±–µ–∫—Ç."
          imageSrc="/images/services/3d-scanning.jpg"
          imageAlt="3D —Å–∫–∞–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –æ–±–µ–∫—Ç —Å –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω —Å–∫–µ–Ω–µ—Ä"
          href="/services#scanning"
        />
      </div>
    </div>
  </section>

  <!-- Trust/Benefits -->
  <section class="py-12 bg-white">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-4 gap-6">
        <div class="text-center">
          <div class="text-4xl mb-4">‚ö°</div>
          <h3 class="font-bold mb-2">{settings?.turnaroundText || '–û–±–∏–∫–Ω–æ–≤–µ–Ω–æ 1‚Äì3 –¥–Ω–∏'}</h3>
          <p class="text-gray-600 text-sm">–ë—ä—Ä–∑–∞ –∏–∑—Ä–∞–±–æ—Ç–∫–∞</p>
        </div>
        <div class="text-center">
          <div class="text-4xl mb-4">üëÅÔ∏è</div>
          <h3 class="font-bold mb-2">–ü—Ä–µ–≥–ª–µ–¥ –ø—Ä–µ–¥–∏ –ø–ª–∞—â–∞–Ω–µ</h3>
          <p class="text-gray-600 text-sm">–£–≤–µ—Ä–µ–Ω–æ—Å—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–æ—Ç–æ</p>
        </div>
        <div class="text-center">
          <div class="text-4xl mb-4">‚úì</div>
          <h3 class="font-bold mb-2">–ì–∞—Ä–∞–Ω—Ü–∏—è</h3>
          <p class="text-gray-600 text-sm">–ì–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ</p>
        </div>
        <div class="text-center">
          <div class="text-4xl mb-4">üöö</div>
          <h3 class="font-bold mb-2">–ö—É—Ä–∏–µ—Ä–∏</h3>
          <p class="text-gray-600 text-sm">{settings?.couriers?.join(', ') || '–ï–∫–æ–Ω—Ç, –°–ø–∏–¥–∏, –†–∞–ø–∏–¥–æ'}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact CTA -->
  <section class="py-16 bg-blue-600 text-white">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">–ì–æ—Ç–æ–≤–∏ –¥–∞ –∑–∞–ø–æ—á–Ω–µ–º?</h2>
      <p class="text-xl mb-8 text-blue-100">–°–≤—ä—Ä–∂–µ—Ç–µ —Å–µ —Å –Ω–∞—Å –∑–∞ –±–µ–∑–ø–ª–∞—Ç–Ω–∞ –∫–æ–Ω—Å—É–ª—Ç–∞—Ü–∏—è</p>
      <a
        href="/contacts"
        class="inline-block bg-white text-blue-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-600 transition"
      >
        –°–≤—ä—Ä–∂–∏ —Å–µ —Å –Ω–∞—Å
      </a>
    </div>
  </section>
</Layout>

