---
import Layout from '../components/Layout.astro';
import SectionTitle from '../components/SectionTitle.astro';
import ProductCard from '../components/ProductCard.astro';
import Tabs from '../components/Tabs.astro';
import Steps from '../components/Steps.astro';
import { getCollection, getEntry } from 'astro:content';

let settings = null;
try {
  settings = (await getEntry('site', 'settings')).data;
} catch (e) {
  // Settings not found, use defaults
}
const products = await getCollection('products', ({ data }) => data.status === 'active');
const featuredProducts = products
  .filter(p => p.data.featured || p.data.isNew)
  .slice(0, 8);
---

<Layout>
  <title>{settings?.siteName || '3D Print Studio'} - –ù–∞—á–∞–ª–æ</title>

  <!-- Hero Section -->
  <section class="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-16 md:py-24">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">
          {settings?.siteName || '3D Print Studio'}
        </h1>
        <p class="text-xl md:text-2xl mb-8 text-blue-100">
          {settings?.brandTagline || '–í–∞—à–∏—è—Ç –ø–∞—Ä—Ç–Ω—å–æ—Ä –∑–∞ 3D –ø–µ—á–∞—Ç –∏ –¥–∏–∑–∞–π–Ω'}
        </p>
        
        <!-- Two Panels -->
        <div class="grid md:grid-cols-2 gap-6 mt-12">
          <div class="bg-white/10 backdrop-blur-sm rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">–ü—Ä–æ–¥—É–∫—Ç–∏</h2>
            <ul class="text-left space-y-2 mb-6">
              <li>‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —Ñ–∏–≥—É—Ä–∫–∏ –∏ –ø–æ–¥–∞—Ä—ä—Ü–∏</li>
              <li>‚Ä¢ –ì–æ—Ç–æ–≤–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –∑–∞ –≤—Å–µ–∫–∏–¥–Ω–µ–≤–Ω–∞ —É–ø–æ—Ç—Ä–µ–±–∞</li>
              <li>‚Ä¢ –°–µ–∑–æ–Ω–Ω–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –∫–æ–ª–µ–∫—Ü–∏–∏</li>
            </ul>
            <a
              href="/products"
              class="inline-block bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-600 transition"
            >
              –í–∏–∂ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ
            </a>
          </div>
          
          <div class="bg-white/10 backdrop-blur-sm rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">–£—Å–ª—É–≥–∏</h2>
            <ul class="text-left space-y-2 mb-6">
              <li>‚Ä¢ 3D –ø–µ—á–∞—Ç –ø–æ –ø–æ—Ä—ä—á–∫–∞</li>
              <li>‚Ä¢ –î–∏–∑–∞–π–Ω –∏ –º–æ–¥–µ–ª–∏—Ä–∞–Ω–µ</li>
              <li>‚Ä¢ 3D —Å–∫–∞–Ω–∏—Ä–∞–Ω–µ</li>
            </ul>
            <a
              href="/services"
              class="inline-block bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-600 transition"
            >
              –í–∏–∂ —É—Å–ª—É–≥–∏—Ç–µ
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Top/New Products -->
  <section class="py-12 bg-white">
    <div class="container mx-auto px-4">
      <SectionTitle title="–¢–æ–ø –ø—Ä–æ–¥—É–∫—Ç–∏" subtitle="–ù–∞–π-–ø–æ–ø—É–ª—è—Ä–Ω–∏—Ç–µ –∏ –Ω–æ–≤–∏ –ø—Ä–æ–¥—É–∫—Ç–∏" />
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {featuredProducts.map(product => (
          <ProductCard product={product} />
        ))}
      </div>
    </div>
  </section>

  <!-- How It Works -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
      <SectionTitle title="–ö–∞–∫ —Ä–∞–±–æ—Ç–∏–º" />
      <Tabs
        tabs={[
          { id: 'products', label: '–ü–æ–¥–∞—Ä—ä—Ü–∏ –∏ –≥–æ—Ç–æ–≤–∏ –ø—Ä–æ–¥—É–∫—Ç–∏' },
          { id: 'services', label: '–£—Å–ª—É–≥–∏' }
        ]}
        defaultTab="products"
      >
        <div slot="products">
          <Steps
            steps={[
              { title: '–ò–∑–±–∏—Ä–∞—à –ø—Ä–æ–¥—É–∫—Ç', description: '–†–∞–∑–≥–ª–µ–¥–∞–π –Ω–∞—à–∞—Ç–∞ –∫–æ–ª–µ–∫—Ü–∏—è –∏ –∏–∑–±–µ—Ä–∏ –ø—Ä–æ–¥—É–∫—Ç' },
              { title: '–ê–∫–æ –µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω ‚Äì –∏–∑–ø—Ä–∞—â–∞—à —Ç–µ–∫—Å—Ç/—Å–Ω–∏–º–∫–∞/–∏–¥–µ—è', description: '–ó–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –∏–∑–ø—Ä–∞—Ç–∏ –¥–µ—Ç–∞–π–ª–∏ –∑–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è—Ç–∞' },
              { title: '–ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ + –∏–∑—Ä–∞–±–æ—Ç–∫–∞', description: '–ü–æ—Ç–≤—ä—Ä–∂–¥–∞–≤–∞–º–µ –¥–µ—Ç–∞–π–ª–∏—Ç–µ –∏ –∑–∞–ø–æ—á–≤–∞–º–µ –∏–∑—Ä–∞–±–æ—Ç–∫–∞—Ç–∞' },
              { title: '–î–æ—Å—Ç–∞–≤–∫–∞ (–ø—Ä–µ–≥–ª–µ–¥/–Ω–∞–ª–æ–∂–µ–Ω –ø–ª–∞—Ç–µ–∂)', description: '–î–æ—Å—Ç–∞–≤—è–º–µ –ø—Ä–æ–¥—É–∫—Ç–∞ —Å –æ–ø—Ü–∏—è –∑–∞ –ø—Ä–µ–≥–ª–µ–¥ –ø—Ä–µ–¥–∏ –ø–ª–∞—â–∞–Ω–µ' }
            ]}
          />
        </div>
        <div slot="services">
          <Steps
            steps={[
              { title: '–ò–∑–ø—Ä–∞—â–∞—à —Ñ–∞–π–ª/–∏–¥–µ—è', description: '–ò–∑–ø—Ä–∞—Ç–∏ 3D —Ñ–∞–π–ª –∏–ª–∏ –æ–ø–∏—à–∏ –∏–¥–µ—è—Ç–∞ —Å–∏' },
              { title: '–ü–æ—Ç–≤—ä—Ä–∂–¥–∞–≤–∞–º–µ –º–∞—Ç–µ—Ä–∏–∞–ª, —Ü–µ–Ω–∞ –∏ —Å—Ä–æ–∫', description: '–û–±—Å—ä–∂–¥–∞–º–µ –¥–µ—Ç–∞–π–ª–∏—Ç–µ –∏ –ø–æ—Ç–≤—ä—Ä–∂–¥–∞–≤–∞–º–µ —É—Å–ª–æ–≤–∏—è—Ç–∞' },
              { title: '–ò–∑—Ä–∞–±–æ—Ç–∫–∞', description: '–ó–∞–ø–æ—á–≤–∞–º–µ –∏–∑—Ä–∞–±–æ—Ç–∫–∞—Ç–∞ —Å –≤–∏—Å–æ–∫–æ –∫–∞—á–µ—Å—Ç–≤–æ' },
              { title: '–î–æ—Å—Ç–∞–≤–∫–∞ (–ø—Ä–µ–≥–ª–µ–¥/–Ω–∞–ª–æ–∂–µ–Ω –ø–ª–∞—Ç–µ–∂)', description: '–î–æ—Å—Ç–∞–≤—è–º–µ –≥–æ—Ç–æ–≤–∏—è –ø—Ä–æ–¥—É–∫—Ç —Å –æ–ø—Ü–∏—è –∑–∞ –ø—Ä–µ–≥–ª–µ–¥' }
            ]}
          />
        </div>
      </Tabs>
    </div>
  </section>

  <!-- Mini Gallery Products -->
  <section class="py-12 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold mb-4">–ù–∞—à–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏</h2>
        <p class="text-gray-600 max-w-2xl mx-auto mb-6">
          –û—Ç–∫—Ä–∏–π—Ç–µ —à–∏—Ä–æ–∫ —Å–ø–µ–∫—Ç—ä—Ä –æ—Ç 3D –ø–µ—á–∞—Ç–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ - –æ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –ø–æ–¥–∞—Ä—ä—Ü–∏ –¥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–∏ —á–∞—Å—Ç–∏.
        </p>
        <a
          href="/products"
          class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition"
        >
          –í–∏–∂ –≤—Å–∏—á–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏
        </a>
      </div>
    </div>
  </section>

  <!-- Mini Gallery Services -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold mb-4">–ù–∞—à–∏—Ç–µ —É—Å–ª—É–≥–∏</h2>
      </div>
      <div class="grid md:grid-cols-3 gap-6">
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="text-xl font-bold mb-3">3D –ü–µ—á–∞—Ç</h3>
          <p class="text-gray-600 mb-4">–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω 3D –ø–µ—á–∞—Ç —Å —Ä–∞–∑–ª–∏—á–Ω–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∏ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.</p>
          <a href="/services#printing" class="text-blue-600 hover:text-blue-700 font-semibold">–ù–∞—É—á–∏ –ø–æ–≤–µ—á–µ ‚Üí</a>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="text-xl font-bold mb-3">–î–∏–∑–∞–π–Ω</h3>
          <p class="text-gray-600 mb-4">–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ 3D –º–æ–¥–µ–ª–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –¥–∏–∑–∞–π–Ω–∏.</p>
          <a href="/services#design" class="text-blue-600 hover:text-blue-700 font-semibold">–ù–∞—É—á–∏ –ø–æ–≤–µ—á–µ ‚Üí</a>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="text-xl font-bold mb-3">3D –°–∫–∞–Ω–∏—Ä–∞–Ω–µ</h3>
          <p class="text-gray-600 mb-4">–ü—Ä–µ—Ü–∏–∑–Ω–æ 3D —Å–∫–∞–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –æ–±–µ–∫—Ç–∏ –∑–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏–ª–∏ –∞–Ω–∞–ª–∏–∑.</p>
          <a href="/services#scanning" class="text-blue-600 hover:text-blue-700 font-semibold">–ù–∞—É—á–∏ –ø–æ–≤–µ—á–µ ‚Üí</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Trust/Benefits -->
  <section class="py-12 bg-white">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-4 gap-6">
        <div class="text-center">
          <div class="text-4xl mb-4">‚ö°</div>
          <h3 class="font-bold mb-2">{settings?.turnaroundText || '–û–±–∏–∫–Ω–æ–≤–µ–Ω–æ 1‚Äì3 –¥–Ω–∏'}</h3>
          <p class="text-gray-600 text-sm">–ë—ä—Ä–∑–∞ –∏–∑—Ä–∞–±–æ—Ç–∫–∞</p>
        </div>
        <div class="text-center">
          <div class="text-4xl mb-4">üëÅÔ∏è</div>
          <h3 class="font-bold mb-2">–ü—Ä–µ–≥–ª–µ–¥ –ø—Ä–µ–¥–∏ –ø–ª–∞—â–∞–Ω–µ</h3>
          <p class="text-gray-600 text-sm">–£–≤–µ—Ä–µ–Ω–æ—Å—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–æ—Ç–æ</p>
        </div>
        <div class="text-center">
          <div class="text-4xl mb-4">‚úì</div>
          <h3 class="font-bold mb-2">–ì–∞—Ä–∞–Ω—Ü–∏—è</h3>
          <p class="text-gray-600 text-sm">–ì–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ</p>
        </div>
        <div class="text-center">
          <div class="text-4xl mb-4">üöö</div>
          <h3 class="font-bold mb-2">–ö—É—Ä–∏–µ—Ä–∏</h3>
          <p class="text-gray-600 text-sm">{settings?.couriers?.join(', ') || '–ï–∫–æ–Ω—Ç, –°–ø–∏–¥–∏, –†–∞–ø–∏–¥–æ'}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact CTA -->
  <section class="py-16 bg-blue-600 text-white">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">–ì–æ—Ç–æ–≤–∏ –¥–∞ –∑–∞–ø–æ—á–Ω–µ–º?</h2>
      <p class="text-xl mb-8 text-blue-100">–°–≤—ä—Ä–∂–µ—Ç–µ —Å–µ —Å –Ω–∞—Å –∑–∞ –±–µ–∑–ø–ª–∞—Ç–Ω–∞ –∫–æ–Ω—Å—É–ª—Ç–∞—Ü–∏—è</p>
      <a
        href="/contacts"
        class="inline-block bg-white text-blue-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-600 transition"
      >
        –°–≤—ä—Ä–∂–∏ —Å–µ —Å –Ω–∞—Å
      </a>
    </div>
  </section>
</Layout>

